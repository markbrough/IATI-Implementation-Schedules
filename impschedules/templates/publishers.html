{% set active_page='organisations'%}{% extends "base.html" %}
{% block content %}
    <script src="static/jquery.tablesorter.min.js"></script>
    <script >
    $(function() {
    $("table#organisations").tablesorter({ sortList: [[0,0]] });
    });

    </script>
    {% if auth%}<a class="btn btn-success pull-right" href="{{url_for('import_schedule')}}">Import new schedule</a>{%endif%}
	<h1>Select an organisation</h1>
    <table class="table" id="organisations">
    <thead>
    <th>Organisation</th><th>Initial implementation</th>{% if auth %}<th>Total score</th><th>Will publish</th><th>Approach</th><th>Elements</th>{%endif%}<th>Group</th>
    </thead>
    <tbody>
	{% for org,org_data in orgs.items() %}
    <tr>
	<td><a href="{{url_for('organisation', id=org_data.publisher.publisher_code_actual)}}">{{ org_data.publisher.publisher_actual }}</a></td>
    <td>{{org_data.properties.publishing_timetable_date_initial.value}}</td>
    {% if auth %}
    <td>{{scores[org].score.total}}</td>
    <td>{{scores[org].score.will_publish}}</td>
    <td>{{scores[org].score.approach}}</td>
    <td>{{scores[org].score.elements}}</td>
    {% endif %}
    <td><span class="{{scores[org].score.group_code}} label lead" >{{scores[org].score.group}}</span></td>
    </tr>
	{% endfor %}
    <tr class="info"><td colspan="3"><b>No implementation schedules</b></td></tr>
    {% for publisher, publishervalues in notpublishing.items() %}
    <tr>
    <td>{{publishervalues[0]}}</td>
    <td></td>
    <td><span class="label-inverse label lead">No implementation schedule</span></td>
    </tr>
    {%endfor%}
    </tbody>
    </table>

{% endblock %}
